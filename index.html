<!DOCTYPE html>
<html>
  <head>
    <title>AJAX to Python server</title>
    <script>
      // function sendToServer() {
      //   var xhr = new XMLHttpRequest();
      //   var url = "http://127.0.0.1:5000"; // DONE Replace with your Python server URL
      //   var payload = {
      //     "name": "John Doe",
      //     "age": 30,
      //     "city": "New York"
      //   };
      //   xhr.open("POST", url);
      //   xhr.setRequestHeader("Content-Type", "application/json");
      //   xhr.send(JSON.stringify(payload));
        
      // }
      function sendIP() {
      // Make an HTTP POST request to the server on port 5000
      const xhr = new XMLHttpRequest();
      const url = "http://127.0.0.1:5000"; // Replace with the URL of your server
      const ip = document.getElementById('ip-address').textContent.trim(); // Get the IP address from the 'ip-address' element
      xhr.open('POST', url);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onload = function() {
        if (xhr.status === 200) {
          console.log('IP address sent successfully');
        } else {
          console.error('Error sending IP address:', xhr.statusText);
        }
      };
      xhr.send(JSON.stringify({ip:data.ip}));
    }
      function getIP() {
        fetch('https://api.ipify.org?format=json')
          .then(response => response.json())
          .then(data => {
            document.getElementById('ip-address').textContent = data.ip;
          })
          .catch(error => {
            console.error('Error fetching IP address:', error);
            document.getElementById('ip-address').textContent = 'Error fetching IP address';
          });
      }
      getIP();
    </script>
  </head>
  <body>
    <h1>AJAX to Python server</h1>
    <!-- <button type="button" onclick="sendToServer()">Send to Python server</button> -->
    <p id="ip-address" style="display: none;"></p>
    <button type="button" onclick="sendIP()">Send My IP Address</button>
  </body>
</html>
